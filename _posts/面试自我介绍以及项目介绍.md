# 自我介绍
面试官您好，我叫徐畅，现在是华中师范大学伍伦贡联合研究院，计算机技术专业的21届研二学生。本科是在武汉科技大学材料物理专业。个人觉得自己学习能力还是比较强的，本科没有太多计算机基础，只学过C语言的基础知识，但是后来通过自学跨专业考研成功，在考研期间，有了比较好的数据结构基础。到了研究生阶段，学校的培养方案主要是AI方面，但是学校系统学习了一些相关课程后，我自己认为这些人工智能算法的可解释性较差。所以在研一下学期，新冠疫情期间开始自学前端web技术。  
首先接触的是HTML，css，js这三个最基本的网页组成部分的语法。在学习HTML和CSS期间，仿照小米官网写了一个静态页面，在这过程中熟悉了`html5`和CSS的`盒模型`。后面用了比较多时间关注在js语言的`特性`上。有了一定的html，css，js的基础后，因为平常听歌用的是网易云音乐，收藏的歌经常在不经意间就会下架，所以想着能不能自己写个自己用的网页播放器，保存自己很喜欢的歌。然后就开始用原生JS实现了这个网页播放器。在做这个网页播放器的过程中，熟悉了`flex布局方式`，一些`DOM的基本操作`，`页面audio元素的属性和方法`，`网页的图像处理技术canvas`以及`audioContext`接口的使用。写了这个项目后，就开始在vue官网上开始学习vue框架，在对vue有了大致的了解后，开始学着用vue写一个待办事项清单的单页应用。写完这个项目，对`MVVM`模式以及`组件化开发`有了一定程度的理解，熟悉了常见`指令`，Vue的 `生命周期`，`组件间参数传递`。也了解了vue的核心插件`Vue-router`和`vuex`的使用。

# 项目介绍
网页播放器是用HTML+CSS+JS完成的一个音频可视化的静态页面应用，通过监听点击事件实现音频列表控制播放，通过监听audio的事件实现按列表顺序播放以及；利用HTML5的canvas画出了一个播放器，另外用了audioContext的接口来获取浏览器当前音频的频率数据，然后将每一帧的频率数据放进数组，然后利用canvas和requestAnimationFrame实现每秒画60次，就实现了动态可视化。  

事项列表清单
这个项目是利用Vue框架开发的一个待办事项清单的单页应用，也通过mocks模拟了后端数据和接口，所以相当于是一个特别小的前后端分离项目，这个项目的主要是熟悉了vue框架的使用以及了解vue-router和vuex核心插件。


## 网页播放器
当时做这个项目的时候，对于如何去开发一个项目是不太清晰的，就凭着自己的感觉走。  
当时脑子里已经有了这个播放器的雏形，最初的想法是有5个模块，播放列表，播放器的视图，视图上面有按钮，然后页面底部有歌词栏，背景是一个动态音频柱状图，最后还有一个调音工具。这个调音工具还没有完成，之后会把这个功能加上去。

### 需求分析
播放列表：根据歌名选择对应的音频，当前歌曲播放完毕后会按列表顺序播放音频，列表播放按钮状态要随着当前歌曲的状态发生改变  
播放器视图：播放按钮能控制当前的音频，播放器按钮图标状态随着当前歌曲的状态发生改变  
歌词栏：歌词栏会显示歌曲当时所唱得歌词
背景可视化：将音频的评率在页面背景可视化展现出来。


### 模块实现

#### 播放列表
##### 播放列表的生成
每一首歌应该都有src,name和lyrics的属性，为了减少html中的代码量，不需要手动在html里添加audio标签和元素节点。我把这些数据抽象在了一个对象数组songs里，然后根据这个数组来把歌添加播放列表里。
```text
先获取到播放列表的dom节点，然后通过遍历数组，对每一个元素都创建成一个单个歌曲的dom节点，并把这些dom节点通过dataset自定义属性，方便之后获取这些单个歌曲的节点。
```
##### 播放列表的播放
1. 监听播放列表里的每首歌后面播放按钮的点击事件，用来控制歌曲的播放暂停。点击按钮后会触发一个回调函数 handlePressed。这个回调函数用来处理歌曲的播放暂停和切换歌动作。  
如果当前点击的是当前歌曲的按钮，则暂停或播放音频，如果点击的是另外一首歌则换切换歌曲。
2. 监听正在播放音频的结束事件，歌曲播放完成后触发回调函数sequentialPlay(), 这个回调函数控制列表的顺序播放，根据在songs数组中的index来获取下一首歌的src。

#### 播放器
使用canvas画布画出自己想要的播放器的样子，播放按钮也是用canvas画的。因为按钮需要控制当前音频的状态，我们需要监听这个按钮的点击事件，但是这个按钮不是一个单独的元素。所以我是通过监听页面的点击事件，如果点击的地方在按钮的坐标范围内，就会触发回调事件，控制当前音频播放。

#### 按钮状态更新
因为这些按钮的状态都是根据audio的播放/暂停状态决定的，所以我们可以监听当前audio的播放暂停事件来完成按钮状态的切换。

#### 歌词栏
我的想法是把每一句歌词改成一个对象，对象有两个属性time和text分别对应时间轴和歌词文本。然后这些歌词对象存在一个数组lyrics里。然后根据当前的播放时间来决定显示这个音频的哪个歌词，可以通过监听audio的timeupdate事件来更新歌词。由于我们只在这个lyrics数组里保存了当前歌的歌词，所以每次切歌的时候需要初始化这个歌词数组。

#### 音频可视化
通过调用audioContext接口，我们可以用当前音频创建一个audioContext源节点，然后把这个源节点连接到一个audioAnalyser分析器，这个分析器会使用傅里叶变换在特定频率捕获音频数据，捕获到的数据要存到Unit8Array数组里，每个元素只占一个字节也就是值的范围是0到255。元素个数有自己设定，我设定是128个。  
然后通过canvas画布，将频率数据数组里的每个元素可视化展现在页面上。将整个画布除以数组的大小得到每条柱子的宽度，然后根据数组里频率的大小决定每条柱的高度，为了让颜色更搭一些，我把柱子的颜色设置成渐变的了。
音频数据数组获取的是那一帧的波形或者频率数据，要实现动态效果，我们需要对每一帧数据都可视化。  通过requestAnimationFrame可以每秒执行60次画柱状图。

## 网页事项清单
这个项目是利用Vue框架开发的一个待办事项清单的单页应用。主要目的是熟悉vue框架的使用以及了解vue-router和vuex插件

### 需求分析
想要完成的需求有
1. 查询所有的待办事项，以及完成这些待办事项所需要的待办单项
2. 新增，修改待办事项
3. 删除，锁定待办事项 (锁定之后，待办事项的数据不能被改动)
4. 新增，修改，删除待办单项
5. 显示为完成的待办单项的计数
### 组件分析
根据上面的需求，将整个项目分成了5个组件
app.vue最外层根组件
layouts.vue 布局组件，接入其他组件
menus.vue 左边待办事项的列表组件
todos.vue 右边待办事项的具体内容
item.vue 待办事项的每条待办单项，是todos.vue的子组件
### 数据分析
#### 显示数据有
待办事项的标题
待办事项的待办单项的文字内容
未完成的待办单项数目
#### 隐式数据有
待办事项的锁的图标
待办事项的删除图标
待办事项的id
待办单项的删除图标
待办单项的完成状态

根据上面的数据分析，然后得到我们所需要的所有数据的数据结构

### api分析 根据用户行为分析需要传入哪些参数，需要从后端返回哪些数据
首次进入页面，查看待办事项的列表
点击新增按钮，新增一个待办事项
点击一个待办事项，右边显示待办事项的详细内容
点击标题，修改待办事项的标题
点击删除图标，删除待办事项
点击锁定图标，锁定待办事项
点击加号图标，新增待办单项
点击待办单项内容，修改待办单项
点击待办单项旁的删除图片，删除待办单项
点击已完成按钮完成单项

### mock模拟后端数据与相应的请求接口
首先用mock生成随机值，用这些随机值初始化待办事项的数组，然后将这个数组导出
然后引入axios库，模拟ajax请求，生成接口用来，返回前端模拟数据
最后将这些接口封装成一个个函数，方便之后直接调用这些函数

现在已经完成了数据与接口的模拟，然后要开始完成前端的单页应用。

### 项目布局与组件
#### 首先完成静态页面的开发

  在main.js里先创建一个Vue的根实例，然后注入路由配置和根组件

  然后在layouts布局组件中划分出这个网页的几个组件位置

  然后分别完成menus组件，todo.vue组件，item组件的开发

  menus组件中，根据data中的数据，用v-for指令循环生成待办事项的dom节点，v-if指令判断是否锁定来决定显不显示锁的图标。用双大括号模板显示未完成单项数目

  todo待办事项详情组件中，这个组件data函数返回有待办事项的标题，为完成待办单项的数目和是否锁定，用这些数据完成todo组件容器的上部分，data还会返回待办单项的所有数据。通过v-bind向他的下半部分也就是子组件item.vue传递数据

  item单个待办单项组件用props属性显示声明想要父组件传递的数据，根据这些数据生成待办单项的dom节点。

  最后在布局laysout组件中对应的位置插入vue组件的标签

  这个时候就完成了静态页面的开发


#### 然后将之前的静态数据换成接口请求数据
先更新menus数据，因为menus中包含了这个项目的所有的数据，将我们之前手动设置items数组列表设置为从后台获取待办事项列表。
先通过vue生命周期的钩子函数created(), 在vue实例创建完成后，向模拟的后台发送请求，获得数据

### 然后修改路由
我们要根据选择左边选的待办事项的id决定右边的子路由是什么，根据动态路由匹配显示待办事项的待办单项
